@model Do_an_NoSQL.Models.ViewModels.UserCreateVM

@{
    var mode = ViewData["Mode"]?.ToString() ?? "create";
    bool isEdit = mode == "edit";
    ViewData["Title"] = isEdit ? "Chỉnh sửa người dùng" : "Tạo người dùng mới";
}

<div class="main-card p-4">
    <h4 class="fw-bold mb-3">
        <i class="fa-solid @(isEdit ? "fa-user-pen" : "fa-user-plus") text-danger me-2"></i>
        @(isEdit ? "CHỈNH SỬA NGƯỜI DÙNG" : "TẠO NGƯỜI DÙNG MỚI")
    </h4>
    <hr class="mb-4" />

    <form asp-action="@(isEdit ? "Edit" : "Create")" method="post" id="userForm">
        @if (isEdit)
        {
            <input type="hidden" name="Id" value="@Model.Id" />
        }

        <div class="row g-4">
            <!-- CỘT TRÁI -->
            <div class="col-md-6">
                <div class="mb-3">
                    <label class="form-label fw-semibold">Tên đăng nhập</label>
                    <input type="text" name="Username" class="input-input" value="@Model.Username" placeholder="VD: testuser" required />
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Họ tên</label>
                    <input type="text" name="FullName" class="input-input" value="@Model.FullName" placeholder="VD: Nguyễn Văn An" required />
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Email</label>
                    <input type="email" name="Email" class="input-input" value="@Model.Email" placeholder="VD: testuser@example.com" required />
                </div>
            </div>

            <!-- CỘT PHẢI -->
            <div class="col-md-6">
                <div class="mb-3">
                    <label class="form-label fw-semibold">Vai trò</label>
                    <select name="RoleCode" class="select-input" required>
                        @foreach (var role in ViewBag.Roles)
                        {
                            if (role.Code == Model.RoleCode)
                            {
                                <option value="@role.Code" selected>@role.Name</option>
                            }
                            else
                            {
                                <option value="@role.Code">@role.Name</option>
                            }
                        }
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Trạng thái</label>
                    <select name="Status" class="select-input">
                        <option value="active" selected="@(Model.Status == "active")">Hoạt động</option>
                        <option value="inactive" selected="@(Model.Status == "inactive")">Ngưng hoạt động</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="mt-4 d-flex justify-content-end">
            <a asp-action="Index" class="btn-outline-gray">
                <i class="fa-solid fa-xmark me-1"></i> Huỷ
            </a>
            <button type="submit" class="btn-red ms-2">
                <i class="fa-solid fa-save me-1"></i> @(isEdit ? "Cập nhật người dùng" : "Lưu người dùng")
            </button>
        </div>
    </form>
</div>
